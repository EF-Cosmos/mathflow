---
AIGC:
    ContentProducer: Minimax Agent AI
    ContentPropagator: Minimax Agent AI
    Label: AIGC
    ProduceID: "00000000000000000000000000000000"
    PropagateID: "00000000000000000000000000000000"
    ReservedCode1: 304502204e479eff224cb6442462889d7e120e1c30749e4a549d5957862960298e7a3d52022100cadd9ee99757519d48313d95fe63e6b5ece530a63c5772f970c49ee914ccda8a
    ReservedCode2: 3044022100830d55a7a6f115889b75586fb2a3185110917fe81ffbd6be6c3fe9784c7c0b95021f258aa4433f5a03d4207459d7561a2213627a230600206c5dcaafbc30f6b80c
---

# Docker Compose é…ç½®å®Œæˆæ€»ç»“

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. ä¸»è¦é…ç½®æ–‡ä»¶
- **`docker-compose.yml`** - å®Œæ•´çš„ Docker Compose ç¼–æ’æ–‡ä»¶
- **`docker-compose.simple.yml`** - ç®€åŒ–ç‰ˆ Docker Compose é…ç½®
- **`.env.example`** - ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿

### 2. Docker æ–‡ä»¶
- **`Dockerfile.backend`** - åç«¯æœåŠ¡ Dockerfile (Node.js + Express)
- **`code/mathflow-new/Dockerfile`** - å‰ç«¯æœåŠ¡ Dockerfile (React + Vite)
- **`code/mathflow-new/nginx.conf`** - å‰ç«¯ nginx é…ç½®æ–‡ä»¶

### 3. å¯åŠ¨å’Œç®¡ç†è„šæœ¬
- **`docker-start.sh`** - è‡ªåŠ¨åŒ–å¯åŠ¨è„šæœ¬ (ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡)
- **`verify-docker-config.sh`** - é…ç½®éªŒè¯è„šæœ¬

### 4. æ–‡æ¡£
- **`DOCKER_README.md`** - è¯¦ç»†ä½¿ç”¨è¯´æ˜æ–‡æ¡£

## ğŸ—ï¸ æœåŠ¡æ¶æ„

### ç«¯å£æ˜ å°„
- **å‰ç«¯æœåŠ¡**: localhost:3000 (React åº”ç”¨)
- **åç«¯æœåŠ¡**: localhost:3001 (API æœåŠ¡)
- **æ•°æ®åº“**: localhost:5432 (PostgreSQL)
- **Redis**: localhost:6379 (ç¼“å­˜æœåŠ¡)
- **Supabase Studio**: localhost:54323 (æ•°æ®åº“ç®¡ç†ç•Œé¢)

### ç½‘ç»œé…ç½®
- **ç½‘ç»œåç§°**: `app-network`
- **ç½‘ç»œç±»å‹**: bridge
- **å­ç½‘**: 172.20.0.0/16

### æ•°æ®æŒä¹…åŒ–
- **postgres_data**: PostgreSQL æ•°æ®å·
- **redis_data**: Redis æ•°æ®å·

## ğŸš€ å¿«é€Ÿå¯åŠ¨

1. **é…ç½®ç¯å¢ƒå˜é‡**:
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®å®é™…çš„ç¯å¢ƒå˜é‡
   ```

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**:
   ```bash
   ./docker-start.sh start
   ```

3. **è®¿é—®åº”ç”¨**:
   - å‰ç«¯: http://localhost:3000
   - åç«¯ API: http://localhost:3001
   - æ•°æ®åº“ç®¡ç†: http://localhost:54323

## ğŸ”§ ç®¡ç†å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
./docker-start.sh start

# åœæ­¢æœåŠ¡
./docker-start.sh stop

# é‡å¯æœåŠ¡
./docker-start.sh restart

# æŸ¥çœ‹æ—¥å¿—
./docker-start.sh logs

# æŸ¥çœ‹çŠ¶æ€
./docker-start.sh status
```

## ğŸ“‹ æœåŠ¡è¯¦æƒ…

### å‰ç«¯æœåŠ¡ (frontend)
- åŸºäº React + Vite + TypeScript
- ä½¿ç”¨ nginx ä½œä¸ºç”Ÿäº§æœåŠ¡å™¨
- æ”¯æŒ SPA è·¯ç”±
- é™æ€èµ„æºç¼“å­˜ä¼˜åŒ–

### åç«¯æœåŠ¡ (backend)
- Node.js + Express
- CORS æ”¯æŒ
- å¥åº·æ£€æŸ¥ç«¯ç‚¹
- AI èŠå¤© API ä»£ç†

### æ•°æ®åº“æœåŠ¡ (database)
- Supabase PostgreSQL 15.1.0.117
- å¯ç”¨ RLS (Row Level Security)
- è‡ªåŠ¨åˆå§‹åŒ–è¿ç§»æ–‡ä»¶
- æ•°æ®æŒä¹…åŒ–

### Redis æœåŠ¡ (redis)
- Redis 7 Alpine
- æŒä¹…åŒ–å­˜å‚¨
- ç¼“å­˜å’Œä¼šè¯å­˜å‚¨

### Supabase Studio (studio)
- æ•°æ®åº“ç®¡ç†ç•Œé¢
- è¡¨ç»“æ„ç®¡ç†
- SQL æŸ¥è¯¢å·¥å…·
- ç”¨æˆ·ç®¡ç†

## ğŸ”’ å®‰å…¨é…ç½®

- ç¯å¢ƒå˜é‡éš”ç¦»
- ç½‘ç»œéš”ç¦» (ä»… app-network)
- æ•°æ®åº“å¯†ç ä¿æŠ¤
- JWT å¯†é’¥é…ç½®
- CORS é…ç½®

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

- æ‰€æœ‰æœåŠ¡é…ç½®äº†é‡å¯ç­–ç•¥
- æ—¥å¿—è½®è½¬é…ç½®
- å¥åº·æ£€æŸ¥é…ç½®
- èµ„æºä½¿ç”¨ç›‘æ§

## ğŸ”„ å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ

### å¼€å‘ç¯å¢ƒ
- ä½¿ç”¨æœ¬åœ°ä»£ç æŒ‚è½½
- æ”¯æŒçƒ­é‡è½½
- è¯¦ç»†æ—¥å¿—è¾“å‡º

### ç”Ÿäº§ç¯å¢ƒ
- ä¼˜åŒ–çš„é•œåƒæ„å»º
- æœ€å°åŒ–é•œåƒå¤§å°
- å®‰å…¨é…ç½®
- æ€§èƒ½ä¼˜åŒ–

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å¯åŠ¨**éœ€è¦è¾ƒé•¿æ—¶é—´æ„å»ºé•œåƒ
2. **ç¯å¢ƒå˜é‡**å¿…é¡»æ­£ç¡®é…ç½®æ‰èƒ½æ­£å¸¸è¿æ¥æœåŠ¡
3. **ç«¯å£å ç”¨**è¯·ç¡®ä¿ 3000, 3001, 5432, 6379, 54323 ç«¯å£æœªè¢«å ç”¨
4. **æ•°æ®å¤‡ä»½**å®šæœŸå¤‡ä»½æ•°æ®å·å†…å®¹
5. **å®‰å…¨æ›´æ–°**å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ

## ğŸ¯ ä¸‹ä¸€æ­¥

1. é…ç½®å®é™…çš„ç¯å¢ƒå˜é‡
2. å¯åŠ¨æœåŠ¡å¹¶éªŒè¯åŠŸèƒ½
3. æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®
4. è®¾ç½®ç›‘æ§å’Œå¤‡ä»½ç­–ç•¥
5. é…ç½® CI/CD æµæ°´çº¿

---

**é…ç½®å®Œæˆæ—¶é—´**: 2025-12-29 18:36:00
**åˆ›å»ºè€…**: Task Agent
**ç‰ˆæœ¬**: v1.0.0