# MathFlow 环境变量配置示例
# 复制此文件为 .env 并修改相应的值

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL 数据库密码
DB_PASSWORD=mathflow_secure_password_123
POSTGRES_PASSWORD=mathflow_secure_password_123
POSTGRES_DB=mathflow

# Redis 密码
REDIS_PASSWORD=redis_secure_password_456

# =============================================================================
# 应用配置
# =============================================================================

# 应用环境 (development/production)
NODE_ENV=production
VITE_API_URL=http://localhost:3001

# JWT 密钥 (用于身份验证)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# 应用端口
APP_PORT=3000
API_PORT=3001

# =============================================================================
# Supabase 配置
# =============================================================================

# Supabase 项目 URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase 匿名密钥
SUPABASE_ANON_KEY=your-supabase-anon-key

# Supabase 服务角色密钥
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# =============================================================================
# AI 服务配置
# =============================================================================

# OpenAI API 密钥 (用于 AI 聊天功能)
OPENAI_API_KEY=sk-your-openai-api-key

# AI 模型配置
AI_MODEL=gpt-3.5-turbo
AI_MAX_TOKENS=2000
AI_TEMPERATURE=0.7

# =============================================================================
# 邮件服务配置 (可选)
# =============================================================================

# SMTP 服务器配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# 发送方邮箱
FROM_EMAIL=noreply@mathflow.local
FROM_NAME=MathFlow System

# =============================================================================
# 文件上传配置
# =============================================================================

# 最大文件上传大小 (MB)
MAX_FILE_SIZE=20

# 允许的文件类型
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,txt,md

# 上传目录
UPLOAD_DIR=/app/uploads

# =============================================================================
# 安全配置
# =============================================================================

# CORS 允许的域名
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://yourdomain.com

# 会话密钥
SESSION_SECRET=your-session-secret-key

# 加密密钥
ENCRYPTION_KEY=your-32-character-encryption-key

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别 (error, warn, info, debug)
LOG_LEVEL=info

# 日志文件路径
LOG_DIR=/var/log/nginx

# 是否启用详细日志
VERBOSE_LOGGING=false

# =============================================================================
# Redis 配置
# =============================================================================

# Redis 主机
REDIS_HOST=redis

# Redis 端口
REDIS_PORT=6379

# Redis 数据库编号
REDIS_DB=0

# Redis 连接超时 (秒)
REDIS_TIMEOUT=5

# =============================================================================
# 数据库配置
# =============================================================================

# 数据库主机
DB_HOST=postgres

# 数据库端口
DB_PORT=5432

# 数据库名称
DB_NAME=mathflow

# 数据库用户
DB_USER=mathflow

# 数据库连接池大小
DB_POOL_SIZE=10

# 数据库连接超时 (毫秒)
DB_TIMEOUT=30000

# =============================================================================
# Nginx 配置
# =============================================================================

# Nginx 工作进程数
NGINX_WORKER_PROCESSES=auto

# Nginx 连接数
NGINX_WORKER_CONNECTIONS=1024

# Nginx 客户端最大请求体大小
NGINX_CLIENT_MAX_BODY_SIZE=20M

# =============================================================================
# 监控配置
# =============================================================================

# 启用性能监控
ENABLE_MONITORING=true

# 监控端口
MONITORING_PORT=9090

# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 备份配置
# =============================================================================

# 自动备份启用
AUTO_BACKUP_ENABLED=true

# 备份间隔 (小时)
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份存储路径
BACKUP_DIR=/backups

# =============================================================================
# 开发环境专用配置
# =============================================================================

# 开发环境数据库配置
DEV_DB_PASSWORD=dev_password
DEV_REDIS_PASSWORD=dev_redis_password

# 开发环境端口映射
DEV_POSTGRES_PORT=5433
DEV_REDIS_PORT=6380
DEV_APP_PORT=3000
DEV_NGINX_PORT=8080

# 开发环境调试
DEV_DEBUG=true
DEV_HOT_RELOAD=true

# =============================================================================
# 生产环境专用配置
# =============================================================================

# SSL 配置
SSL_CERT_PATH=/etc/nginx/ssl/mathflow.crt
SSL_KEY_PATH=/etc/nginx/ssl/mathflow.key

# HTTPS 重定向
FORCE_HTTPS=false

# 安全头配置
SECURITY_HEADERS_ENABLED=true

# =============================================================================
# 第三方服务集成
# =============================================================================

# Google Analytics ID (可选)
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX

# Sentry DSN (错误监控)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# 百度统计 ID (可选)
BAIDU_ANALYTICS_ID=your-baidu-analytics-id

# =============================================================================
# 高级配置
# =============================================================================

# 启用 API 限流
RATE_LIMITING_ENABLED=true

# API 限流配置
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# 缓存配置
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# WebSocket 配置
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000